{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AgriTechFusion </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    
    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">
    
    <!-- Google Web Fonts -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAEZaVHt4Ba4Ev_cBP3w5Zt02JbmwHX_38&libraries=places"></script>
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">  
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Libraries Stylesheet -->
    <link href="{% static 'farmer/lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'farmer/lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    
    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'farmer/css/bootstrap.min.css' %}" rel="stylesheet">
    
    <!-- Template Stylesheet -->
    <link href="{% static 'farmer/css/style.css' %}" rel="stylesheet">
    <style>
        .navbar-nav a.nav-item.nav-link,
        .navbar-nav .nav-item.dropdown a.nav-link.dropdown-toggle {
            color: black !important;
        }
        .custom-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            padding: 10px 30px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .custom-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }
        
        
        
        .custom-form label {
            font-weight: bold;
            color: #495057;
        }
        
        .custom-form input[type="text"],
        .custom-form input[type="email"],
        .custom-form input[type="tel"],
        .custom-form select,
        .custom-form textarea {
            width: 100%;
            padding: 5px;
            margin-top: 10px;
            margin-bottom: 10px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        .custom-form input[type="text"]:focus,
        .custom-form input[type="email"]:focus,
        .custom-form input[type="tel"]:focus,
        .custom-form select:focus,
        .custom-form textarea:focus {
            border-color: #007bff;
        }
        
        .custom-form textarea {
            resize: vertical;
        }
        
        .custom-form button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .custom-form button:hover {
            background-color: #0056b3;
        }
        .accordion {
            margin-top: 20px;
        }
        
        .accordion-item {
            margin-bottom: 20px;
        }
        
        .accordion-button {
            background-color: #82db34;
            color: #fff;
            border: 1px solid #3498db;
            border-radius: 5px;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .accordion-button:hover {
            background-color: #297fb9d6;
        }
        
        .accordion-body {
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .single-product-text p {
            font-size: 16px;
            line-height: 1.6;
            color: #272626;
        }
        #languageSwitchBtn {
            position: fixed;
            bottom: 40px;
            left: 25px;
            border-radius: 50%;
            padding: 10px;
            background-color: #007bff;
            color: #ffffff;
            cursor: pointer;
            box-shadow:0 3px 10px rgba(132,132,132,0.7)
        }

        #languageModal {
            display: none;
            position: fixed;
            bottom: 80px;
            left: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        
        .languageOption {
            margin: 5px;
            cursor: pointer;
        }
    </style>
    
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->
        
        
        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0">
            <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
                <a href="" class="navbar-brand p-0">
                    <h1 class="m-0 text-primary"><img src="{% static 'farmer/img/logo.png' %}" class="mx-3" alt="AgriTechFusion Logo">AgriTechFusion</h1>
                    <!-- <img src="img/logo.png" alt="Logo"> -->
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0">
                        <a href="{% url 'dashboard' %}" class="nav-item nav-link ">Dashboard</a>
                        <a href="" class="nav-item nav-link active">Expert Help Desk</a>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><span class="">My Account</span></a>
                            <div class="dropdown-menu m-0">
                                <a href="{% url 'cropdisease' %}" class="dropdown-item ">Crop Disease Detection</a>
                                <a href="{% url 'farmer_appointments' %}" class="dropdown-item">Appointments</a>
                                <a href="{% url 'farmer_feedback' %}" class="dropdown-item">Feedback</a>
                                <a href="{% url 'profile' %}" class="dropdown-item ">My Profile</a>
                            </div>
                        </div>
                        <a href="{% url 'chatbot' %}" class="nav-item nav-link">Chatbot</a>
                    </div>
                    
                    <a href="{% url 'log_out' %}" class="btn btn-secondary py-2 px-4 ms-3">Log out</a>
                </div>
            </nav>
            
            <div class="container-xxl py-5  hero-header mb-5">
                
            </div>
            
            
        </div>
        <!-- Navbar & Hero End -->
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <img src="{% static 'farmer/img/help.png' %}" alt=""> 
                </div>
                <div class="col-md-8">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="">
                                <div class="card custom-card">
                                    <div class="card-body custom-form">
                                        <h2 class="card-title text-center mb-4">Ask a Query</h2>
                                        <form action="{% url 'helpdesk' %}" method="post" class="needs-validation" id="queryForm">
                                            {% csrf_token %}
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label for="name">Your Name:</label>
                                                    <input type="text" class="form-control" id="name" name="name" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="email">Your Email:</label>
                                                    <input type="email" class="form-control" id="email" name="email" required>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label for="contactNumber">Contact Number:</label>
                                                    <input type="tel" class="form-control" id="contactNumber" name="contactNumber" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="queryType">Type of Query:</label>
                                                    <select class="form-control" id="queryType" name="queryType" required>
                                                        <option value="General">General Inquiry</option>
                                                        <option value="Technical">Technical Issue</option>
                                                        <option value="CropInfo">Crop Information</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-md-6">
                                                    <label for="crop">Type Of Crop:</label>
                                                    <input type="text" class="form-control" id="crop" name="crop" required>
                                                    <div class="invalid-feedback">Please enter crop information.</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="querySubject">Subject of Query:</label>
                                                    <select class="form-control" id="querySubject" name="querySubject" required>
                                                        <option value="PestControl">Pest Control</option>
                                                        <option value="Fertilization">Fertilization</option>
                                                        <option value="Disease">Crop Disease</option>
                                                        <option value="Other">Other</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="invalid-feedback">Please select the subject of your query.</div>
                                                <label for="issue">Specific Issue:</label>
                                                <textarea class="form-control" id="issue" name="issue" rows="2" pattern=".{150,}" title="Minimum 150 characters required" required></textarea>
                                                <span id="charCount">0</span> characters entered (minimum 150).
                                                <div class="invalid-feedback">Please enter the specific issue of your query.</div>
                                            </div>
                                            <div class="form-group">
                                                <label for="location">Location:</label>
                                                <input type="text" class="form-control" id="location" name="location" required>
                                                <small class="form-text text-muted">Allow location permission for improved results before submitting the form.</small>
                                                <div class="invalid-feedback">Please enter your location.</div>
                                            </div>
                                            <input type="hidden" id="country" name="country">
                                            <input type="hidden" id="state" name="state">
                                            <input type="hidden" id="city" name="city">
                                            <input type="hidden" id="pinCode" name="pinCode">
                                            <input type="hidden" id="longitude" name="longitude">
                                            <input type="hidden" id="latitude" name="latitude">
                                            <input type="hidden" id="weatherCondition" name="weatherCondition">
                                            
                                            <button type="button" class="btn btn-secondary btn-block" id="getLocationBtn" onclick="return getLocation()">Submit</button>
                                        </form>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 mt-5">
                <div class="content-title style1 mb-40">
                    <h2 style="text-decoration: underline;">Frequently Asked Queries</h2>
                </div>
                <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                <span>
                                    <i class="las la-plus-circle plus"></i>
                                    <i class="las la-minus-circle minus"></i>
                                </span>
                                Can you provide advice on sustainable farming practices?
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="single-product-text">
                                    <p>Yes, we specialize in offering guidance on sustainable farming practices. Our agriculture experts can provide insights into eco-friendly farming methods, soil conservation, water management, and more. Feel free to explore our resources and reach out for personalized advice.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                <span>
                                    <i class="las la-plus-circle plus"></i>
                                    <i class="las la-minus-circle minus"></i>
                                </span>
                                How can I protect my crops from common pests organically?
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <p>Organic pest control is essential for sustainable farming. Our experts recommend using natural predators, companion planting, and organic pesticides. Explore our guides on eco-friendly pest management to protect your crops without harmful chemicals.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <span>
                                    <i class="las la-plus-circle plus"></i>
                                    <i class="las la-minus-circle minus"></i>
                                </span>
                                What are some effective ways to improve soil fertility naturally?
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="single-product-text">
                                    <p>Enhancing soil fertility is crucial for successful farming. Consider incorporating organic matter, such as compost and cover crops, to enrich the soil. Crop rotation and using natural fertilizers can also contribute to sustainable soil health.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                <span>
                                    <i class="las la-plus-circle plus"></i>
                                    <i class="las la-minus-circle minus"></i>
                                </span>
                                How can I manage water efficiently on my farm to conserve resources?
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="single-product-text">
                                    <p>Implementing efficient water management practices is key. Consider drip irrigation, rainwater harvesting, and soil moisture monitoring. Our experts can guide you on creating a customized water conservation plan tailored to your farm's specific needs.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFive">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                <span>
                                    <i class="las la-plus-circle plus"></i>
                                    <i class="las la-minus-circle minus"></i>
                                </span>
                                Can you provide guidance on transitioning to organic farming practices?
                            </button>
                        </h2>
                        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="single-product-text">
                                    <p>Transitioning to organic farming requires careful planning. Our experts can assist you in developing a step-by-step transition plan, including soil preparation, crop selection, pest control strategies, and obtaining organic certification. Start your journey towards sustainable and organic agriculture with our guidance.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                </div>
            </div>
        </div>
        
        
        <script>
            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                } else {
                    alert("Geolocation is not supported by this browser.");
                }
            }
            function showPosition(position) {
                const locationData = {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                };
                // Set values for hidden fields
                document.getElementById("latitude").value = locationData.latitude;
                document.getElementById("longitude").value = locationData.longitude;
                // Get weather condition
                getWeatherCondition(locationData.latitude, locationData.longitude);
                // Perform reverse geocoding using Google Maps Geocoding API
                const geocoder = new google.maps.Geocoder();
                const latlng = new google.maps.LatLng(locationData.latitude, locationData.longitude);
                geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        if (results[0]) {
                            const addressDetails = {};
                            // Loop through address components
                            for (let i = 0; i < results[0].address_components.length; i++) {
                                const component = results[0].address_components[i];
                                const componentType = component.types[0];
                                addressDetails[componentType] = component.long_name;
                            }
                            const formattedAddress = results[0].formatted_address;
                            const placeId = results[0].place_id;
                            console.log("Address Details:", addressDetails);
                            console.log("Formatted Address:", formattedAddress);
                            console.log("Place ID:", placeId);
                            document.getElementById("country").value = addressDetails.country || '';
                            document.getElementById("state").value = addressDetails.administrative_area_level_1 || '';
                            document.getElementById("city").value = addressDetails.locality || '';
                            document.getElementById("pinCode").value = addressDetails.postal_code || '';
                            document.getElementById("queryForm").submit();
                        } else {
                            alert('No results found');
                        }
                    } else {
                        alert('Geocoder failed due to: ' + status);
                    }
                });
            }
            async function getWeatherCondition(latitude, longitude) {
                const apiKey = 'c1353ee8e193b81b197b8b1f681ecfea';
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}`;
                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();
                    if (response.ok) {
                        const weatherCondition = data.weather[0].main;
                        console.log("Weather Condition:", weatherCondition);
                        
                        document.getElementById("weatherCondition").value = weatherCondition;
                    } else {
                        console.error('Failed to fetch weather data:', data.message);
                    }
                } catch (error) {
                    console.error('Error fetching weather data:', error);
                }
            }
        </script>
        
        <!-- Full Screen Search Start -->
        
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        {% if messages %}              
        {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
        <script>swal({
            title: "Warning!",
            text: "{{message}}",
            icon: "warning",
            button: "OK",
        });
    </script>
    
    {% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
    <script>swal({
        title: "Info :)",
        text: "{{message}}",
        icon: "info",
        button: "OK",
    });
</script>
{% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
<script>swal({
    title: "Error :)",
    text: "{{message}}",
    icon: "error",
    button: "OK",
});
</script>
{% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
<script>swal({
    title: "Success :)",
    text: "{{message}}",
    icon: "success",
    button: "OK",
});
</script>
{% endif %}              
{% endfor %} 
{% endif %}


<!-- Footer Start -->
<div class="container-fluid bg-primary text-white footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container py-5 px-lg-5">
        <div class="row gy-5 gx-4 pt-5">
            <div class="col-12">
                <h2 class="fw-bold text-white mb-4">AgriTechFusion</h2>
                
            </div>
            <div class="col-lg-5 col-md-12">
                <div class="row gy-5 g-4">
                    <div class="col-md-6">
                        <h5 class="fw-bold text-white mb-4">Shortcuts</h5>
                        <a class="btn btn-link" href="{% url 'index' %}">Home</a>
                        <a class="btn btn-link" href="{% url 'about' %}">About Us</a>
                        <a class="btn btn-link" href="{% url 'contact' %}">Contact Us</a>
                        <a class="btn btn-link" href="{% url 'govtlogin' %}">Govt Officers</a>
                        <a class="btn btn-link" href="{% url 'expertlogin' %}">Agricultural Experts</a>
                        
                        
                    </div>
                    <div class="col-md-6">
                        <h5 class="fw-bold text-white mb-4">Useful Links</h5>
                        <a class="btn btn-link" href="{% url 'adminlogin' %}">Admin Login</a>
                        <a class="btn btn-link" href="{% url 'farmerlogin' %}">Farmer Login</a>
                        <a class="btn btn-link" href="{% url 'farmerregister' %}">Farmer Register</a>
                        
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                
                
            </div>
            <div class="col-md-6 col-lg-4 mt-lg-n5">
                <div class="bg-light rounded" style="padding: 30px;">
                    <img class="img-fluid animated zoomIn" src="{% static 'farmer/img/farmer3.webp' %}" alt="AgriTechFusion Hero Image">
                    
                </div>
            </div>
        </div>
    </div>
    <div class="container px-lg-5">
        <div class="copyright">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    &copy; <a class="border-bottom" href="#">AgriTechFusion</a>, All Right Reserved. 
                    
                    <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                    
                </div>
                
            </div>
        </div>
    </div>
</div>
<!-- Footer End -->

<div id="languageSwitchBtn" onclick="showLanguageModal()">Lan</div>

<div id="languageModal">
    <a href="{% url 'helpdesk' %}"><div class="languageOption">En</div></a>
    <a href="{% url 'helpdesk_hin' %}"><div class="languageOption">Hin</div></a>
    <a href="{% url 'helpdesk_tel' %}"><div class="languageOption">Tel</div></a>

</div>

<script>
    function showLanguageModal() {
        var modal = document.getElementById('languageModal');
        modal.style.display = 'block';
    }
    
    function selectLanguage(language) {
        alert('Selected language: ' + language); 
        var modal = document.getElementById('languageModal');
        modal.style.display = 'none';
    }
    
    
    window.onclick = function(event) {
        var modal = document.getElementById('languageModal');
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
</script>



<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-secondary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'farmer/lib/wow/wow.min.js' %}"></script>

<script src="{% static 'farmer/lib/easing/easing.min.js' %}"></script>

<script src="{% static 'farmer/lib/waypoints/waypoints.min.js' %}"></script>

<script src="{% static 'farmer/lib/counterup/counterup.min.js' %}"></script>

<script src="{% static 'farmer/lib/owlcarousel/owl.carousel.min.js' %}"></script>


<!-- Template Javascript -->
<script src="{% static 'farmer/js/main.js' %}"></script>

</body>

</html>